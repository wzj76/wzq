# 一、基本信息
**项目名称：**duole_client_base（多乐客户端基类库）   
**仓库地址：**https://code.duole.com/common/duole_client_base.git  
**项目描述：** 
  - 支持 arm64-v8a、armeabi-v7a；
  - cocos2d-x 引擎升级到 3.17.2 版本；
  - 多乐客户端项目基于统一基类库进行开发；

**项目内容：** 
  - cocos2d-duole, 多乐定制版 cocos2d 引擎，基于3.17.2版本，对其功能进行裁剪和扩展；
  - gamebase, 多乐自行开发的公共代码和组件；
  - sdks, 多乐sdk组开发的公共组件，如 launcher 等；
  - third-sdks, 第三方sdk，如 bugly; 
  - external, 多乐项目引用的第三方开源代码库，如 protobuf、iconv 等；
  - tools, 通用打包脚本、符号文件处理脚本等；

# 二、开发规范
duole_client_base 为多乐客户端项目全局基类库，原则上，由各项目组核心客户端工程师共同进行开发和维护。

## 1、仓库权限的管理
- **用户：**各项目组客户端开发人员。   
  默认设置“报告者”权限。可以获取项目代码，在此基础上进行客户端项目开发；
- **贡献者：**各组核心开发人员或经过授权的普通开发人员。  
  可设置“开发者”权限。其可以在开发分支进行功能新增、修改、bug修复等操作，并提交代码到开发分支；
- **管理员：**经过授权的核心开发人员。  
  设置为“主程序”权限。负责审查贡献者提交到开发分支的代码，包括但不限于功能正确性、逻辑合理性、功能必要性、代码规范等，负责将经过确认的提交合并到 master 分支，并最终完成发布；

## 2、需求的管理
- 需求的产生
  * 项目组共有功能需求；
  * 既往缺陷修复；
  * 技术迭代需求；
  * 其它需求；
- 需求池的建立及约束项
  * 需求提出者在需求池新增需求描述信息：包括新功能、bug、技术迭代等；
  * 新增功能类需求，由类库开发人员及需求提出者沟通讨论后确认，必要时需邀请项目组相关人员共同讨论确认；
  * 技术迭代和缺陷修复类需求，可由类库开发人员及提出者直接讨论后确认；
  * 经确认的需求应进行标识，并设定优先级；
- 需求的发布
  * 根据需求优先级将经过确认的需求列入基类库开发计划，并拟定待发版本号。
  * 基类库开发计划应在“多乐技术沟通群”进行公告，应包含如下信息：版本号、预计发布日期、发布内容列表、开发人员名单；

## 3、开发与测试
- 开发人员根据版本规划，创建对应的开发分支；
- 类库开发人员在对应分支进行迭代开发，完成本期功能开发任务；
- 类库开发人员进行单元测试；
- 类库开发人员将类库接入 Demo 工程进行验证；
- 类库开发人员交叉进行代码阅读审查；
- 中台测试工程师介入测试（用例覆盖，如果有的话）；

# 三、发布规范
目前类库以源代码的方式进行发布使用。
## 版本分类
- 公测版
  * 定义：开发人员依据版本开发计划，完成某个版本需求开发后，可发布为公测版；
  * 标签命名规则：vx.x.x_betax;  
    示例：v1.0.1_beta1、v1.0.1_beta2、v1.0.2_beta1;
- 稳定版
  * 定义：某个公测版本经长时间生产环境验证后，无明显问题，可发布为稳定版；
  * 标签命名规则：vx.x.x;   
    示例：v1.0.1、v1.0.2;

## 发布
- 按计划完成版本开发后，管理员负责将代码从开发分支合并到 master ；
- 管理员为本次发布打标签，首次发布版本一般标签定义为公测版；
- 公测版稳定运行一定周期（一般不少于1个月）后，发布为稳定版；

# 四、应用规范
类库用户永远只应从 master 分支指定标签拉取类库项目代码用于构建自己的客户端项目；
```shell
git clone -b [tag标签] https://code.duole.com/common/duole_client_base.git
```
- 类库用户按上述方法指定标签拉取类库项目到本地；
- 构建客户端项目，并在客户端的发布日志里标记类库版本标签；
